<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Beatstore</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Framer Motion (via CDN build) -->
  <script src="https://unpkg.com/framer-motion/dist/framer-motion.umd.js"></script>
  <!-- React + ReactDOM CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <!-- Babel for JSX in the browser -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-gray-900 text-white">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;
    const { motion } = window['framer-motion'];

    const beats = [
      {
        id: 1,
        title: "Dreamscape",
        genre: "Lo-fi",
        cover: "https://via.placeholder.com/300x300.png?text=Dreamscape",
        audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",
        price: 29.99
      },
      {
        id: 2,
        title: "Neon Streets",
        genre: "Trap",
        cover: "https://via.placeholder.com/300x300.png?text=Neon+Streets",
        audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3",
        price: 39.99
      }
    ];

    function BeatCard({ beat, addToCart }) {
      const [playing, setPlaying] = useState(false);
      const audioRef = React.useRef(null);

      const togglePlay = () => {
        if (!playing) {
          audioRef.current.play();
        } else {
          audioRef.current.pause();
        }
        setPlaying(!playing);
      };

      return (
        <motion.div
          whileHover={{ scale: 1.05 }}
          className="bg-gray-800 rounded-xl p-4 shadow-lg"
        >
          <img src={beat.cover} alt={beat.title} className="rounded-lg mb-4" />
          <h2 className="text-xl font-bold">{beat.title}</h2>
          <p className="text-sm text-gray-400">{beat.genre}</p>
          <div className="flex items-center gap-2 mt-3">
            <button
              className="bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded text-white"
              onClick={togglePlay}
            >
              {playing ? "Pause" : "Play"}
            </button>
            <button
              className="bg-green-500 hover:bg-green-600 px-3 py-1 rounded text-white"
              onClick={() => addToCart(beat)}
            >
              Add to Cart (${beat.price})
            </button>
          </div>
          <audio src={beat.audio} ref={audioRef} onEnded={() => setPlaying(false)} />
        </motion.div>
      );
    }

    function Cart({ cart, setCart }) {
      const total = cart.reduce((sum, b) => sum + b.price, 0).toFixed(2);
      const removeFromCart = (id) => setCart(cart.filter(b => b.id !== id));

      return (
        <div className="fixed bottom-4 right-4 bg-gray-800 p-4 rounded-xl shadow-lg w-64">
          <h3 className="text-lg font-bold mb-2">Cart</h3>
          {cart.length === 0 ? (
            <p className="text-gray-400">No items in cart</p>
          ) : (
            <div>
              {cart.map((item) => (
                <div key={item.id} className="flex justify-between items-center mb-1">
                  <span>{item.title}</span>
                  <button onClick={() => removeFromCart(item.id)} className="text-red-400">x</button>
                </div>
              ))}
              <p className="mt-2 font-bold">Total: ${total}</p>
              <a
                href="https://paypal.me/YOURPAYPALHANDLE"
                target="_blank"
                className="block bg-blue-500 hover:bg-blue-600 text-center mt-2 py-1 rounded"
              >
                Checkout
              </a>
            </div>
          )}
        </div>
      );
    }

    function App() {
      const [cart, setCart] = useState([]);

      const addToCart = (beat) => {
        if (!cart.find(item => item.id === beat.id)) {
          setCart([...cart, beat]);
        }
      };

      return (
        <div className="p-6">
          <h1 className="text-3xl font-bold mb-6">Beatstore</h1>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {beats.map((beat) => (
              <BeatCard key={beat.id} beat={beat} addToCart={addToCart} />
            ))}
          </div>
          <Cart cart={cart} setCart={setCart} />
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
